"use strict";angular.module("gridTestApp",[]),angular.module("gridTestApp").controller("MainCtrl",["$scope",function(){}]),function(){function a(){return{MEDIA:{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"},MEDIA_PRIORITY:["gt-lg","lg","gt-md","md","gt-sm","sm"]}}function b(a,b){function c(){var c={};return Object.keys(a.MEDIA).forEach(function(d){c[d]=b.matchMedia(a.MEDIA[d])}),c}return{queries:c()}}function c(a,b){function c(c,d){for(var e=0;e<a.MEDIA_PRIORITY.length;e++){var f=a.MEDIA_PRIORITY[e];if(b.queries[f].matches){var g=c.$normalize(f+"-"+d);if(c[g])return c[g]}}return c[c.$normalize(d)]}function d(b,c,d){var e=[];return b.forEach(function(b){var f=c.$normalize(b);c[f]&&e.push(c.$observe(f,angular.bind(void 0,d,null)));for(var g in a.MEDIA){if(f=c.$normalize(g+"-"+b),!c[f])return;e.push(c.$observe(f,angular.bind(void 0,d,g)))}}),function(){e.forEach(function(a){a()})}}return{watchResponsiveAttributes:d,getResponsiveAttribute:c}}function d(){function a(a,b){return b+a}function b(a,b,c){return"("+b+" "+a+" "+c+")"}return{px:angular.bind(void 0,a,"px"),percent:angular.bind(void 0,a,"%"),add:angular.bind(void 0,b,"+"),subtract:angular.bind(void 0,b,"-"),mult:angular.bind(void 0,b,"*"),div:angular.bind(void 0,b,"/")}}angular.module("gridTestApp").factory("$mdConstants",a).factory("$mdMedia",b).factory("$mdUtil",c).factory("$mdCalc",d),b.$inject=["$mdConstants","$window"],c.$inject=["$mdConstants","$mdMedia"]}(),angular.module("gridTestApp").directive("mdGridTile",["$mdUtil",function(a){return{restrict:"E",require:"^mdGridList",scope:{},template:"<figure ng-transclude></figure>",transclude:!0,link:function(b,c,d,e){c.attr("role","listitem"),e.addTile(d),b.$on("$destroy",angular.bind(e,e.removeTile,d)),a.watchResponsiveAttributes(["colspan","rowspan"],d,angular.bind(e,e.invalidateLayout))}}}]),function(){function a(a){this.invalidated=!1,this.$timeout_=a,this.tiles=[],this.layoutDelegate}function b(a){function b(a){for(var b=0,f=0;f-b<a.col;)i>=h?c():(b=k.indexOf(0,i),-1!==b?(f=e(b+1),-1!==f?i=f+1:c()):c());return d(b,a.col,a.row),i=b+a.col,{col:b,row:j}}function c(){i=0,j++,d(0,h,-1)}function d(a,b,c){for(var d=a;a+b>d;d++)k[d]=Math.max(k[d]+c,0)}function e(a){var b;for(b=a;b<k.length;b++)if(0!==k[b])return b;return b===k.length?b:void 0}function f(){for(var a=[],b=0;h>b;b++)a.push(0);return a}var g=a.tileSpans,h=a.colCount,i=0,j=0,k=f(),l=g.map(function(a){return{spans:a,position:b(a)}});return l}angular.module("gridTestApp").directive("mdGridList",["$$mdGridLayout","$mdCalc","$mdConstants","$mdMedia","$mdUtil",function(b,c,d,e,f){var g=c;return{restrict:"E",controller:a,link:function(a,c,h,i){function j(){f.watchResponsiveAttributes(["cols","row-height"],h,k);for(var a in d.MEDIA)e.queries[a].addListener(angular.bind(i,i.invalidateLayout))}function k(a){null==a?i.invalidateLayout():e.queries[a].matches&&i.invalidateLayout()}function l(a,b,c,d,e,f){var h=1/c*100,i=1==c?0:d*(c-1)/c,j=g.subtract(g.percent(h),g.px(i)),k=g.add(g.mult(a.col,j),g.px(a.col*d)),l=g.add(g.subtract(g.percent(b.col*h),g.px(b.col*i)),g.px((b.col-1)*d)),m={width:"calc("+l+")",left:"calc("+k+")",paddingTop:"",marginTop:"",top:"",height:""};if("fixed"==e)return angular.extend(m,{top:a.row*f+a.row*d+"px",height:b.row*f+"px"});var n=h*(1/f),o=g.add(g.percent(b.row*n),g.px((b.row-1)*d)),p=g.add(g.percent(a.row*n),g.px(a.row*d));return angular.extend(m,{paddingTop:"calc("+o+")",marginTop:"calc("+p+")"})}function m(){return c[0].querySelectorAll("md-grid-tile")}function n(){return i.tiles.map(function(a){return{row:parseInt(f.getResponsiveAttribute(a,"rowspan"),10)||1,col:parseInt(f.getResponsiveAttribute(a,"colspan"),10)||1}})}function o(){return parseInt(f.getResponsiveAttribute(h,"cols"),10)}function p(){var a=f.getResponsiveAttribute(h,"row-height");return-1!==a.indexOf(":")?"ratio":"fixed"}function q(){return parseInt(f.getResponsiveAttribute(h,"gutter"),10)}function r(){var a=f.getResponsiveAttribute(h,"row-height");if(-1===a.indexOf(":"))return parseInt(a,10);var b=a.split(":");return parseFloat(b[0])/parseFloat(b[1])}c.attr("role","list"),j(),i.layoutDelegate=function(){var a=m(),c=o(),d=p(),e=r(),f=q();b({tileSpans:n(),colCount:c}).forEach(function(b,g){angular.element(a[g]).css(l(b.position,b.spans,c,f,d,e))})}}}}]).factory("$$mdGridLayout",function(){return b}),a.$inject=["$timeout"],a.prototype.addTile=function(a){this.tiles.push(a),this.invalidateLayout()},a.prototype.removeTile=function(a){var b=this.tiles.indexOf(a);-1!==b&&(this.tiles.splice(b,1),this.invalidateLayout())},a.prototype.invalidateLayout=function(){this.invalidated||(this.invalidated=!0,this.$timeout_(angular.bind(this,this.layout)))},a.prototype.layout=function(){try{this.layoutDelegate()}finally{this.invalidated=!1}}}();