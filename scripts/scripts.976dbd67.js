"use strict";angular.module("gridTestApp",[]),function(){angular.module("gridTestApp").controller("MainCtrl",["$scope",function(){function a(){return c[Math.floor(Math.random()*c.length)]}var b=996,c=["#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336","#e53935","#d32f2f","#c62828","#b71c1c","#ff8a80","#ff5252","#ff1744","#d50000","#fce4ec","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#d81b60","#c2185b","#ad1457","#880e4f","#ff80ab","#ff4081","#f50057","#c51162","#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc","#9c27b0","#8e24aa","#7b1fa2","#6a1b9a","#4a148c","#ea80fc","#e040fb","#d500f9","#aa00ff","#ede7f6","#d1c4e9","#b39ddb","#9575cd","#7e57c2","#673ab7","#5e35b1","#512da8","#4527a0","#311b92","#b388ff","#7c4dff","#651fff","#6200ea","#e8eaf6","#c5cae9","#9fa8da","#7986cb","#5c6bc0","#3f51b5","#3949ab","#303f9f","#283593","#1a237e","#8c9eff","#536dfe","#3d5afe","#304ffe","#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1","#82b1ff","#448aff","#2979ff","#2962ff","#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b","#80d8ff","#40c4ff","#00b0ff","#0091ea","#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064","#84ffff","#18ffff","#00e5ff","#00b8d4","#e0f2f1","#b2dfdb","#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#004d40","#a7ffeb","#64ffda","#1de9b6","#00bfa5","#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#b9f6ca","#69f0ae","#00e676","#00c853","#f1f8e9","#dcedc8","#c5e1a5","#aed581","#9ccc65","#8bc34a","#7cb342","#689f38","#558b2f","#33691e","#ccff90","#b2ff59","#76ff03","#64dd17","#f9fbe7","#f0f4c3","#e6ee9c","#dce775","#d4e157","#cddc39","#c0ca33","#afb42b","#9e9d24","#827717","#f4ff81","#eeff41","#c6ff00","#aeea00","#fffde7","#fff9c4","#fff59d","#fff176","#ffee58","#ffeb3b","#fdd835","#fbc02d","#f9a825","#f57f17","#ffff8d","#ffff00","#ffea00","#ffd600","#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00","#ffe57f","#ffd740","#ffc400","#ffab00","#fff3e0","#ffe0b2","#ffcc80","#ffb74d","#ffa726","#ff9800","#fb8c00","#f57c00","#ef6c00","#e65100","#ffd180","#ffab40","#ff9100","#ff6d00","#fbe9e7","#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722","#f4511e","#e64a19","#d84315","#bf360c","#ff9e80","#ff6e40","#ff3d00","#dd2c00","#efebe9","#d7ccc8","#bcaaa4","#a1887f","#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723","#d7ccc8","#bcaaa4","#8d6e63","#5d4037","#ffffff","#fafafa","#f5f5f5","#eeeeee","#e0e0e0","#bdbdbd","#9e9e9e","#757575","#616161","#212121","#000000","#ffffff","#eeeeee","#bdbdbd","#616161","#eceff1","#cfd8dc","#b0bec5","#90a4ae","#78909c","#607d8b","#546e7a","#455a64","#37474f","#263238","#cfd8dc","#b0bec5","#78909c","#455a64"];this.demo="topeka",this.perfTiles=function(){for(var c=[],d=0;b>d;d++)c.push({color:a()});return c}(),this.onLayout=function(a){console.log(a.performance.layoutTime+","+a.performance.domTime),this.totalTime=a.performance.totalTime.toFixed(3),this.layoutTime=a.performance.layoutTime.toFixed(3),this.domTime=a.performance.domTime.toFixed(3),this.tileCount=a.performance.tileCount}}])}(),function(){function a(){return{MEDIA:{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"},MEDIA_PRIORITY:["gt-lg","lg","gt-md","md","gt-sm","sm"]}}function b(a,b){function c(){var c={};return Object.keys(a.MEDIA).forEach(function(d){c[d]=b.matchMedia(a.MEDIA[d])}),c}return{queries:c()}}function c(a,b,c){function d(a){var b=c.performance.now();return a(),c.performance.now()-b}function e(c,d){for(var e=0;e<a.MEDIA_PRIORITY.length;e++){var f=a.MEDIA_PRIORITY[e];if(b.queries[f].matches){var h=g(c,f+"-"+d);if(c[h])return c[h]}}return c[c.$normalize(d)]}function f(b,c,d){var e=[];return b.forEach(function(b){var f=c.$normalize(b);c[f]&&e.push(c.$observe(f,angular.bind(void 0,d,null)));for(var h in a.MEDIA){var f=g(c,h+"-"+b);if(!c[f])return;e.push(c.$observe(f,angular.bind(void 0,d,h)))}}),function(){e.forEach(function(a){a()})}}function g(a,b){return h[b]||(h[b]=a.$normalize(b))}var h={};return{time:d,watchResponsiveAttributes:f,getResponsiveAttribute:e}}function d(){function a(a,b){return b+a}function b(a,b,c){return"("+b+" "+a+" "+c+")"}return{px:angular.bind(void 0,a,"px"),percent:angular.bind(void 0,a,"%"),add:angular.bind(void 0,b,"+"),subtract:angular.bind(void 0,b,"-"),mult:angular.bind(void 0,b,"*"),div:angular.bind(void 0,b,"/"),calc:function(a){return"calc("+a+")"}}}angular.module("gridTestApp").factory("$mdConstants",a).factory("$mdMedia",b).factory("$mdUtil",c).factory("$mdCalc",d),b.$inject=["$mdConstants","$window"],c.$inject=["$mdConstants","$mdMedia","$window"]}(),angular.module("gridTestApp").directive("mdGridTile",["$mdUtil",function(a){return{restrict:"E",require:"^mdGridList",scope:{},template:"<figure ng-transclude></figure>",transclude:!0,link:function(b,c,d,e){function f(){g(),e.removeTile(d)}c.attr("role","listitem"),e.addTile(d,b.$parent.$index),b.$on("$destroy",f);var g=a.watchResponsiveAttributes(["colspan","rowspan"],d,angular.bind(e,e.invalidateLayout))}}}]),function(){function a(a){this.invalidated=!1,this.$timeout_=a,this.tiles=[],this.layoutDelegate}function b(a){function b(a){for(var b=0,f=0;f-b<a.col;)i>=h?c():(b=k.indexOf(0,i),-1!==b?(f=e(b+1),-1!==f?i=f+1:c()):c());return d(b,a.col,a.row),i=b+a.col,{col:b,row:j}}function c(){i=0,j++,d(0,h,-1)}function d(a,b,c){for(var d=a;a+b>d;d++)k[d]=Math.max(k[d]+c,0)}function e(a){var b;for(b=a;b<k.length;b++)if(0!==k[b])return b;return b===k.length?b:void 0}function f(){for(var a=[],b=0;h>b;b++)a.push(0);return a}var g=a.tileSpans,h=a.colCount,i=0,j=0,k=f(),l=g.map(function(a){return{spans:a,position:b(a)}});return{rowCount:j+Math.max.apply(Math,k),positioning:l}}angular.module("gridTestApp").directive("mdGridList",["$$mdGridLayout","$mdCalc","$mdConstants","$mdMedia","$mdUtil",function(b,c,d,e,f){var g=c;return{restrict:"E",controller:a,scope:{onLayout:"&"},link:function(a,c,h,i){function j(){t=f.watchResponsiveAttributes(["cols","row-height"],h,l);for(var a in d.MEDIA)e.queries[a].addListener(u)}function k(){t();for(var a in d.MEDIA)e.queries[a].removeListener(u)}function l(a){null==a?i.invalidateLayout():e.queries[a].matches&&i.invalidateLayout()}function m(a,b,c,d,e,f,h){var i=1/c*100,j=1==c?0:e*(c-1)/c,k=g.subtract(g.percent(i),g.px(j)),l=g.add(g.mult(a.col,k),g.px(a.col*e)),m=g.add(g.subtract(g.percent(b.col*i),g.px(b.col*j)),g.px((b.col-1)*e)),n={width:g.calc(m),left:g.calc(l),paddingTop:"",marginTop:"",top:"",height:""};switch(f){case"fixed":n.top=g.px(a.row*h+a.row*e),n.height=g.px(b.row*h);break;case"ratio":var o=i*(1/h),p=g.subtract(g.percent(o),g.px(j)),q=g.add(g.subtract(g.percent(b.row*o),g.px(b.row*j)),g.px((b.row-1)*e)),r=g.add(g.mult(a.row,p),g.px(a.row*e));n.paddingTop=g.calc(q),n.marginTop=g.calc(r);break;case"fit":var s=1==d?0:e*(d-1)/d,t=1/d*100,p=g.subtract(g.percent(t),g.px(s)),u=g.add(g.mult(a.row,p),g.px(a.row*e)),v=g.add(g.subtract(g.percent(b.row*t),g.px(b.row*s)),g.px((b.row-1)*e));n.top=g.calc(u),n.height=g.calc(v)}return n}function n(){return c[0].querySelectorAll("md-grid-tile")}function o(){return i.tiles.map(function(a){return{row:parseInt(f.getResponsiveAttribute(a,"rowspan"),10)||1,col:parseInt(f.getResponsiveAttribute(a,"colspan"),10)||1}})}function p(){return parseInt(f.getResponsiveAttribute(h,"cols"),10)}function q(){return parseInt(f.getResponsiveAttribute(h,"gutter"),10)}function r(){var a=f.getResponsiveAttribute(h,"row-height");return"fit"==a?"fit":-1!==a.indexOf(":")?"ratio":"fixed"}function s(){var a=f.getResponsiveAttribute(h,"row-height");switch(r()){case"fixed":return parseInt(a,10);case"ratio":var b=a.split(":");return parseFloat(b[0])/parseFloat(b[1]);case"fit":return 0}}c.attr("role","list");var t,u=angular.bind(i,i.invalidateLayout);j(),a.$on("$destroy",k),i.layoutDelegate=function(){var c,d=n(),e=p(),g=r(),h=s(),j=q(),k=f.time(function(){var a;c=f.time(function(){a=b({tileSpans:o(),colCount:e})}),a.positioning.forEach(function(b,c){angular.element(d[c]).css(m(b.position,b.spans,e,a.rowCount,j,g,h))})});a.onLayout({$event:{performance:{tileCount:i.tiles.length,totalTime:k,layoutTime:c,domTime:k-c}}})}}}}]).factory("$$mdGridLayout",function(){return b}),a.$inject=["$timeout"],a.prototype.addTile=function(a,b){angular.isUndefined(b)?this.tiles.push(a):this.tiles.splice(b,0,a),this.invalidateLayout()},a.prototype.removeTile=function(a){var b=this.tiles.indexOf(a);-1!==b&&(this.tiles.splice(b,1),this.invalidateLayout())},a.prototype.invalidateLayout=function(){this.invalidated||(this.invalidated=!0,this.$timeout_(angular.bind(this,this.layout)))},a.prototype.layout=function(){try{this.layoutDelegate()}finally{this.invalidated=!1}}}();