"use strict";angular.module("gridTestApp",[]),angular.module("gridTestApp").controller("MainCtrl",["$scope",function(){}]),function(){function a(){return{MEDIA:{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"},MEDIA_PRIORITY:["gt-lg","lg","gt-md","md","gt-sm","sm"]}}function b(a,b){function c(){var c={};return Object.keys(a.MEDIA).forEach(function(d){c[d]=b.matchMedia(a.MEDIA[d])}),c}return{queries:c()}}function c(a,b){function c(c,d){for(var e=0;e<a.MEDIA_PRIORITY.length;e++){var f=a.MEDIA_PRIORITY[e];if(b.queries[f].matches){var g=c.$normalize(f+"-"+d);if(c[g])return c[g]}}return c[c.$normalize(d)]}function d(b,c,d){var e=[];return b.forEach(function(b){var f=c.$normalize(b);c[f]&&e.push(c.$observe(f,angular.bind(void 0,d,null)));for(var g in a.MEDIA){if(f=c.$normalize(g+"-"+b),!c[f])return;e.push(c.$observe(f,angular.bind(void 0,d,g)))}}),function(){e.forEach(function(a){a()})}}return{watchResponsiveAttributes:d,getResponsiveAttribute:c}}angular.module("gridTestApp").factory("$mdConstants",a).factory("$mdMedia",b).factory("$mdUtil",c),b.$inject=["$mdConstants","$window"],c.$inject=["$mdConstants","$mdMedia"]}(),angular.module("gridTestApp").directive("mdGridTile",["$mdUtil",function(a){return{restrict:"E",require:"^mdGridList",scope:{},template:"<figure ng-transclude></figure>",transclude:!0,link:function(b,c,d,e){c.attr("role","listitem"),e.addTile(d),b.$on("$destroy",angular.bind(e,e.removeTile,d)),a.watchResponsiveAttributes(["colspan","rowspan"],d,angular.bind(e,e.invalidateLayout))}}}]),function(){function a(a){this.invalidated=!1,this.$timeout_=a,this.tiles=[],this.layoutDelegate}function b(a){function b(a){for(var b=0,f=0;f-b<a.col;)i>=h?c():(b=k.indexOf(0,i),-1!==b?(f=e(b+1),-1!==f?i=f+1:c()):c());return d(b,a.col,a.row),i=b+a.col,{col:b,row:j}}function c(){i=0,j++,d(0,h,-1)}function d(a,b,c){for(var d=a;a+b>d;d++)k[d]=Math.max(k[d]+c,0)}function e(a){var b;for(b=a;b<k.length;b++)if(0!==k[b])return b;return b===k.length?b:void 0}function f(){for(var a=[],b=0;h>b;b++)a.push(0);return a}var g=a.tileSpans,h=a.colCount,i=0,j=0,k=f(),l=g.map(function(a){return{spans:a,position:b(a)}});return l}angular.module("gridTestApp").directive("mdGridList",["$$mdGridLayout","$mdConstants","$mdMedia","$mdUtil","$parse",function(b,c,d,e){return{restrict:"E",controller:a,link:function(a,f,g,h){function i(){e.watchResponsiveAttributes(["cols","row-height"],g,j);for(var a in c.MEDIA)d.queries[a].addListener(angular.bind(h,h.invalidateLayout))}function j(a){null==a?h.invalidateLayout():d.queries[a].matches&&h.invalidateLayout()}function k(a,b,c,d,e){var f=1/c*100,g={width:b.col*f+"%",left:a.col*f+"%",paddingTop:"",marginTop:"",top:"",height:""};if("fixed"==d)return angular.extend(g,{top:a.row*e+"px",height:b.row*e+"px"});var h=1/e,i=f*h;return angular.extend(g,{paddingTop:b.row*i+"%",marginTop:a.row*i+"%"})}function l(){return f[0].querySelectorAll("md-grid-tile")}function m(){return h.tiles.map(function(a){return{row:parseInt(e.getResponsiveAttribute(a,"rowspan"),10)||1,col:parseInt(e.getResponsiveAttribute(a,"colspan"),10)||1}})}function n(){return parseInt(e.getResponsiveAttribute(g,"cols"),10)}function o(){var a=e.getResponsiveAttribute(g,"row-height");return-1!==a.indexOf(":")?"ratio":"fixed"}function p(){var a=e.getResponsiveAttribute(g,"row-height");if(-1===a.indexOf(":"))return parseInt(a,10);var b=a.split(":");return parseFloat(b[0])/parseFloat(b[1])}f.attr("role","list"),i(),h.layoutDelegate=function(){var a=l(),c=n(),d=o(),e=p();b({tileSpans:m(),colCount:c}).forEach(function(b,f){angular.element(a[f]).css(k(b.position,b.spans,c,d,e))})}}}}]).factory("$$mdGridLayout",function(){return b}),a.$inject=["$timeout"],a.prototype.addTile=function(a){this.tiles.push(a),this.invalidateLayout()},a.prototype.removeTile=function(a){var b=this.tiles.indexOf(a);-1!==b&&(this.tiles.splice(b,1),this.invalidateLayout())},a.prototype.invalidateLayout=function(){this.invalidated||(this.invalidated=!0,this.$timeout_(angular.bind(this,this.layout)))},a.prototype.layout=function(){try{this.layoutDelegate()}finally{this.invalidated=!1}}}();